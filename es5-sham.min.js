// Copyright 2009-2012 by contributors, MIT License
// vim: ts=4 sts=4 sw=4 expandtab
// Module systems magic dance
(function(e){typeof define=="function"&&define.amd?define(e):typeof YUI=="function"?YUI.add("es5-sham",e):e()})(function(){function a(e){try{return e.sentinel=0,Object.getOwnPropertyDescriptor(e,"sentinel").value===0}catch(t){}}function v(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){}}var e=Function.prototype.call,t=Object.prototype,n=e.bind(t.hasOwnProperty),r,i,s,o,u;if(u=n(t,"__defineGetter__"))r=e.bind(t.__defineGetter__),i=e.bind(t.__defineSetter__),s=e.bind(t.__lookupGetter__),o=e.bind(t.__lookupSetter__);Object.getPrototypeOf||(Object.getPrototypeOf=function(n){return n.__proto__||(n.constructor?n.constructor.prototype:t)});if(Object.defineProperty){var f=a({}),l=typeof document=="undefined"||a(document.createElement("div"));if(!l||!f)var c=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||c){var h="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(r,i){if(typeof r!="object"&&typeof r!="function"||r===null)throw new TypeError(h+r);if(c)try{return c.call(Object,r,i)}catch(a){}if(!n(r,i))return;var f={enumerable:!0,configurable:!0};if(u){var l=r.__proto__;r.__proto__=t;var p=s(r,i),d=o(r,i);r.__proto__=l;if(p||d)return p&&(f.get=p),d&&(f.set=d),f}return f.value=r[i],f.writable=!0,f}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)});if(!Object.create){var p,d=Object.prototype.__proto__===null;d||typeof document=="undefined"?p=function(){return{__proto__:null}}:p=function(){function r(){}var e=document.createElement("iframe"),t=document.body||document.documentElement;e.style.display="none",t.appendChild(e),e.src="javascript:";var n=e.contentWindow.Object.prototype;return t.removeChild(e),e=null,delete n.constructor,delete n.hasOwnProperty,delete n.propertyIsEnumerable,delete n.isPrototypeOf,delete n.toLocaleString,delete n.toString,delete n.valueOf,n.__proto__=null,r.prototype=n,p=function(){return new r},new r},Object.create=function(t,n){function i(){}var r;if(t===null)r=p();else{if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object prototype may only be an Object or null");i.prototype=t,r=new i,r.__proto__=t}return n!==void 0&&Object.defineProperties(r,n),r}}if(Object.defineProperty){var m=v({}),g=typeof document=="undefined"||v(document.createElement("div"));if(!m||!g)var y=Object.defineProperty,b=Object.defineProperties}if(!Object.defineProperty||y){var w="Property description must be an object: ",E="Object.defineProperty called on non-object: ",S="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(a,f,l){if(typeof a!="object"&&typeof a!="function"||a===null)throw new TypeError(E+a);if(typeof l!="object"&&typeof l!="function"||l===null)throw new TypeError(w+l);if(y)try{return y.call(Object,a,f,l)}catch(c){}if(n(l,"value"))if(u&&(s(a,f)||o(a,f))){var h=a.__proto__;a.__proto__=t,delete a[f],a[f]=l.value,a.__proto__=h}else a[f]=l.value;else{if(!u)throw new TypeError(S);n(l,"get")&&r(a,f,l.get),n(l,"set")&&i(a,f,l.set)}return a}}if(!Object.defineProperties||b)Object.defineProperties=function(t,r){if(b)try{return b.call(Object,t,r)}catch(i){}for(var s in r)n(r,s)&&s!="__proto__"&&Object.defineProperty(t,s,r[s]);return t};Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch(x){Object.freeze=function(t){return function(n){return typeof n=="function"?n:t(n)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(t){return!1}),Object.isFrozen||(Object.isFrozen=function(t){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)!==t)throw new TypeError;var r="";while(n(t,r))r+="?";t[r]=!0;var i=n(t,r);return delete t[r],i})});